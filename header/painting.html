<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Artist Dashboard ‚Äî Nibash</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #f5f9ff;
      --card: #e8f0fe;
      --accent: #5a7db8;
      --muted: #a0b8d8;
      --soft: #d6e4ff;
      --shadow: rgba(20,20,20,0.06);
    }
    *{box-sizing:border-box;font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{
      margin:0;
      background:var(--bg);
      color:#333;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      min-height:100vh;
    }

    /* Header */
    header {
      background: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .logo { display:flex; align-items:center; gap:10px; font-weight:600; font-size:22px; }
    .logo-img { width:40px;height:40px;border-radius:50%;object-fit:cover; }
    header nav a { margin-left: 1rem; text-decoration: none; color: #333; }
    .logout-btn { background: #5a7db8; color: white; padding: 0.4rem 1rem; border-radius: 6px; }

    /* layout */
    .dashboard { display: flex; min-height: calc(100vh - 60px); }

    /* Sidebar */
    .sidebar {
      width: 220px;
      background: white;
      padding: 1.5rem;
      border-right: 1px solid #eee;
      position: relative;
    }
    .sidebar h3 { margin-bottom: 1rem; font-weight: 600; }
    .sidebar a {
      display: flex; align-items: center; justify-content: space-between;
      padding: 0.6rem 1rem; margin: 0.3rem 0; text-decoration: none; color: #555;
      border-radius: 6px; position: relative;
    }
    .sidebar a:hover { background: var(--soft); font-weight: 600; }
    .sidebar a::after { content: "üé®"; font-size: 1rem; opacity: 0.5; pointer-events: none; }

    /* main content */
    .content { flex: 1; padding: 2rem; }

    /* HERO / SLIDER */
    .hero {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      min-height: 500px;
      box-shadow: 0 8px 24px var(--shadow);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 28px;
      gap: 24px;
      background: #111; /* fallback while images load */
    }
    .hero-slider {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }
    .hero-slider .slide {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transform: scale(1.02);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .hero-slider .slide.active { opacity: 1; transform: scale(1); }
    /* soft overall tint so text stays readable but images are visible */
    .hero-slider::after {
      content: '';
      position: absolute; inset: 0;
      background: linear-gradient(90deg, rgba(0,0,0,0.35) 0%, rgba(0,0,0,0.20) 40%, rgba(0,0,0,0.45) 100%);
      z-index: 2;
      pointer-events: none;
    }

    /* hero text overlay (semi-transparent so slide shows through) */
    .hero-text-overlay {
      position: relative;
      z-index: 3;
      width: min(680px, 63%);
      background: rgba(255,255,255,0.06); /* very low solid tint to hint image behind */
      color: #fff;
      padding: 28px;
      border-radius: 12px;
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.25);
    }
    .hero-text-overlay h1 {
      margin:0 0 12px 0; font-size:32px; line-height:1.05; font-weight:700;
      text-shadow: 0 2px 8px rgba(0,0,0,0.55);
    }
    .hero-text-overlay p { margin:0; opacity:0.95; line-height:1.6; font-size:15px; color: #fff; }

    .cta { margin-top: 18px; display:flex; gap:12px; flex-wrap:wrap; }
    .btn { border:none; padding:10px 16px; border-radius:8px; cursor:pointer; font-weight:600; transition:all .22s ease; }
    .btn.white { background: rgba(255,255,255,0.95); color:#3a4c75; }
    .btn.dark  { background: rgba(0,0,0,0.25); color:#fff; border:1px solid rgba(255,255,255,0.15); }
    .btn.white:hover{ transform: translateY(-3px); }
    .btn.dark:hover{ transform: translateY(-3px); }

    /* right column thumbnails (optional small preview) */
    .hero-right-previews {
      position: relative;
      z-index: 3;
      display:flex;
      flex-direction:column;
      gap:12px;
      width:240px;
      flex-shrink:0;
    }
    .preview-thumb { width:100%; height:120px; border-radius:10px; overflow:hidden; box-shadow:0 6px 16px rgba(0,0,0,0.2); }
    .preview-thumb img { width:100%; height:100%; object-fit:cover; display:block; }

    /* slider controls */
    .hero-controls {
      position:absolute;
      z-index: 4;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      display:flex;
      gap:8px;
      align-items:center;
    }
    .hero-controls .dot {
      width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,0.4); cursor:pointer;
      box-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }
    .hero-controls .dot.active { background: white; transform:scale(1.1); }
    .hero-arrow {
      position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.25); color:white;
      width:40px;height:40px;border-radius:8px; display:flex;align-items:center;justify-content:center; z-index:5; cursor:pointer;
      border:none;
    }
    .hero-arrow:hover { background: rgba(0,0,0,0.4); }
    .hero-arrow.prev { left:12px; }
    .hero-arrow.next { right:12px; }

    /* cards row */
    .card-row { display:flex; gap:18px; margin-top: 18px; flex-wrap:wrap; }
    .card {
      background: var(--card);
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 6px 18px var(--shadow);
      display: flex; align-items: center; gap: 14px;
    }
    .card .avatar { width:56px;height:56px;border-radius:50%;overflow:hidden;flex-shrink:0;border:4px solid #fff;box-shadow: 0 3px 8px rgba(0,0,0,0.06); }
    .progressWrap { height:10px; background:#eee; border-radius:999px; overflow:hidden; margin-top:8px; }
    .progressFill { height:100%; width:62%; background:#7aa04b; display:block; border-radius:999px; }

    .section { background:var(--card); padding:16px; border-radius:12px; box-shadow:0 6px 18px var(--shadow); margin-bottom:1rem; }
    .section h3 { margin:0 0 10px 0; font-size:16px; }

    .creationsGrid { display:grid; grid-template-columns: repeat(3,1fr); gap:14px; }
    .product {
      background: linear-gradient(180deg,#fff,#f5f9ff);
      padding:12px; border-radius:10px; text-align:center; border:1px solid rgba(0,0,0,0.03);
      display:flex; flex-direction:column; gap:10px; align-items:center; justify-content:center; transition:transform .22s ease;
    }
    .product:hover { transform: translateY(-6px) }
    .product img { width:100%; height:150px; object-fit:cover; border-radius:8px; }
    .contact-seller { font-weight:700; color:white; background-color:var(--accent); padding:10px 20px; border-radius:8px; cursor:pointer; width:100%; border:none; }
    .contact-seller:hover { background-color:#7a9bd8; }

    /* activity feed */
    .activity-card { width:100%; margin-top:1rem; }
    .activity-grid { display:grid; grid-template-columns: repeat(2,1fr); gap:1rem; margin-top:12px; }
    .activity { background:#f0f5ff; padding:1rem; border-radius:8px; font-size:0.95rem; }

    /* chat modal */
    .chat-modal { position: fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.5); z-index: 9999; }
    .chat-modal.active { display:flex; }
    .chat-box { width:420px; max-width:94%; background:white; padding:18px; border-radius:10px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
    .chat-box h4 { margin:0 0 8px 0; }
    .chat-box .meta { font-size:13px; color:#666; margin-bottom:8px; }
    .chat-close { float:right; background:transparent; border:none; font-size:20px; cursor:pointer; }

    /* Artist Profile Section */
    .artist-profile {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 6px 18px var(--shadow);
    }
    .artist-image {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid var(--soft);
    }
    .artist-details {
      flex: 1;
    }
    .artist-name {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--accent);
    }
    .artist-specialty {
      font-size: 16px;
      color: var(--muted);
      margin-bottom: 12px;
    }
    .artist-bio {
      line-height: 1.6;
      margin-bottom: 15px;
    }
    .artist-stats {
      display: flex;
      gap: 20px;
    }
    .stat {
      text-align: center;
    }
    .stat-value {
      font-size: 20px;
      font-weight: 600;
      color: var(--accent);
    }
    .stat-label {
      font-size: 12px;
      color: var(--muted);
    }

    /* Featured Artists Section */
    .featured-artists {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .artist-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 6px 18px var(--shadow);
      transition: transform 0.3s ease;
    }
    .artist-card:hover {
      transform: translateY(-5px);
    }
    .artist-card-img {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }
    .artist-card-content {
      padding: 15px;
    }
    .artist-card-name {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 5px;
    }
    .artist-card-specialty {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 10px;
    }
    .artist-card-bio {
      font-size: 13px;
      line-height: 1.4;
      margin-bottom: 15px;
    }
    .artist-card-stats {
      display: flex;
      justify-content: space-between;
      border-top: 1px solid #eee;
      padding-top: 10px;
    }

    /* responsive */
    @media (max-width: 1024px) {
      .sidebar { display:none; }
      .content { padding:14px; }
      .hero { padding:18px; flex-direction:column; gap:16px; min-height:420px; justify-content:flex-start; }
      .hero-text-overlay { width:100%; }
      .hero-right-previews { flex-direction:row; width:100%; }
      .creationsGrid { grid-template-columns: repeat(2,1fr); }
      .activity-grid { grid-template-columns: 1fr; }
      .artist-profile { flex-direction: column; text-align: center; }
      .artist-stats { justify-content: center; }
      .featured-artists { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 600px) {
      .creationsGrid { grid-template-columns: 1fr; }
      .hero-text-overlay h1 { font-size:24px; }
      .featured-artists { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <header>
    <div class="logo"><img src="../images/mainLogo.png" alt="Nibash Logo" class="logo-img">Nibash</div>
    <nav>
      <a href="../users/customer.html">Home</a>
      <a href="../users/vendor.html">Artist</a>
      <a href="../index.html" class="logout-btn">Log out</a>
    </nav>
  </header>

  <div class="dashboard">
    <!-- sidebar -->
    <aside class="sidebar" aria-label="Account menu">
      <a href="../users/customerDashboard.html"><h3>My Account</h3></a>
      <a href="#" class="active">Profile</a>
      <a href="#">Wishlist</a>
      <a href="#">Orders</a>
      <a href="#">Saved Collections</a>
      <a href="#">Settings</a>
    </aside>

    <!-- main -->
    <main class="content">

      <!-- HERO -->
      <section class="hero" role="banner" aria-label="hero">
        <!-- slider images (cover entire hero) -->
        <div class="hero-slider" aria-hidden="true">
          <div class="slide active" style="background-image:url('../images/painting1.jpg')"></div>
          <div class="slide" style="background-image:url('../images/painting17.jpg')"></div>
          <div class="slide" style="background-image:url('../images/painting16.jpg')"></div>
        </div>

        <!-- arrows -->
        <button class="hero-arrow prev" aria-label="Previous slide">‚Äπ</button>
        <button class="hero-arrow next" aria-label="Next slide">‚Ä∫</button>

        <!-- main text overlay -->
        <div class="hero-text-overlay" aria-live="polite">
          <h1>Discover Masterpieces: <br> Contemporary Art Gallery</h1>
          <p>
            Explore a world of creativity with our curated collection of paintings from talented artists.
            Each artwork tells a unique story and brings emotion, beauty, and inspiration to your space.
            Connect directly with artists, commission custom pieces, and build your personal art collection.
          </p>
          <div class="cta">
            <button class="btn white" id="contactSupportBtn">Contact Support</button>
            <button class="btn dark" id="browseBtn">Browse New Arrivals</button>
          </div>
        </div>

        <!-- optional small image previews on right -->
        <div class="hero-right-previews" aria-hidden="true">
          <div class="preview-thumb"><img src="../images/painting4.jpg" alt="Abstract Art Preview"></div>
          <div class="preview-thumb"><img src="../images/painting5.jpg" alt="Portrait Preview"></div>
          <div class="preview-thumb"><img src="../images/painting15.jpg" alt="Landscape Preview"></div>
        </div>

        <!-- dots -->
        <div class="hero-controls" aria-hidden="true"></div>
      </section>

      <!-- Artist Profile Section -->
      <section class="section">
        <h3>Featured Artist</h3>
        <div class="artist-profile">
          <img src="../images/artist2.jpg" alt="Featured Artist" class="artist-image">
          <div class="artist-details">
            <div class="artist-name">Elena Rodriguez</div>
            <div class="artist-specialty">Contemporary Abstract Painter</div>
            <div class="artist-bio">
              Elena is known for her vibrant abstract compositions that explore the relationship between color and emotion. 
              With over 15 years of experience, her work has been exhibited in galleries across Europe and North America. 
              She finds inspiration in nature, music, and urban landscapes.
            </div>
            <div class="artist-stats">
              <div class="stat">
                <div class="stat-value">127</div>
                <div class="stat-label">Artworks</div>
              </div>
              <div class="stat">
                <div class="stat-value">42</div>
                <div class="stat-label">Exhibitions</div>
              </div>
              <div class="stat">
                <div class="stat-value">15</div>
                <div class="stat-label">Years Experience</div>
              </div>
              <div class="stat">
                <div class="stat-value">4.9</div>
                <div class="stat-label">Rating</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- small cards row (restored) -->
      <div class="card-row" style="margin-bottom:8px">
        <div class="card" style="flex:1">
          <div style="display:flex;align-items:center;gap:12px">
            <div class="avatar"><img src="../images/artist.jpg" alt="artist" style="width:100%;height:100%;object-fit:cover"></div>
            <div>
              <div style="font-weight:700">Master Painter - David Chen</div>
              <div style="font-size:13px;color:#6a7a8a">Known for Hyperrealistic Portraits</div>
            </div>
          </div>
        </div>

        <div class="card" style="width:360px;align-items:center;justify-content:space-between">
          <div style="display:flex;gap:12px;align-items:center">
            <div class="avatar"><img src="../images/artist2.jpg" alt="artist" style="width:100%;height:100%;object-fit:cover"></div>
            <div>
              <div style="font-weight:700">Sophia Williams</div>
              <div style="font-size:13px;color:#6a7a8a">Watercolor & Mixed Media</div>
              <div class="progressWrap" style="width:260px"><span class="progressFill"></span></div>
            </div>
          </div>
         </div>
      </div>

      <!-- Featured Artists Section -->
      <section class="section">
        <h3>Featured Artists</h3>
        <div class="featured-artists">
          <div class="artist-card">
            <img src="../images/artist.jpg" alt="Artist" class="artist-card-img">
            <div class="artist-card-content">
              <div class="artist-card-name">Marcus Johnson</div>
              <div class="artist-card-specialty">Urban & Street Art</div>
              <div class="artist-card-bio">Creating vibrant murals that reflect city life and cultural diversity. Based in Brooklyn, NY.</div>
              <div class="artist-card-stats">
                <div>86 Artworks</div>
                <div>4.7‚òÖ</div>
              </div>
            </div>
          </div>
          
          <div class="artist-card">
            <img src="../images/artist.jpg" alt="Artist" class="artist-card-img">
            <div class="artist-card-content">
              <div class="artist-card-name">Isabella Rossi</div>
              <div class="artist-card-specialty">Oil Paintings & Classical Art</div>
              <div class="artist-card-bio">Trained in Florence, specializing in Renaissance-inspired portraiture and still life.</div>
              <div class="artist-card-stats">
                <div>64 Artworks</div>
                <div>4.9‚òÖ</div>
              </div>
            </div>
          </div>
          
          <div class="artist-card">
            <img src="../images/artist.jpg" alt="Artist" class="artist-card-img">
            <div class="artist-card-content">
              <div class="artist-card-name">Ahmed Hassan</div>
              <div class="artist-card-specialty">Calligraphy & Islamic Art</div>
              <div class="artist-card-bio">Blending traditional Arabic calligraphy with contemporary design elements.</div>
              <div class="artist-card-stats">
                <div>112 Artworks</div>
                <div>4.8‚òÖ</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Nearby Artists -->
      <section class="section">
        <h3>Artists Nearby</h3>
        <div class="card-row">
          <div class="card" style="flex:1;justify-content:space-between">
            <div style="display:flex;gap:12px;align-items:center">
              <div class="avatar"><img src="../images/artist2.jpg" alt="artist"></div>
              <div>
                <div style="font-weight:700">Urban Canvas Studio</div>
                <div style="font-size:13px;color:#6a7a8a">Dhaka ‚Ä¢ 2km away</div>
              </div>
            </div>
            <button class="btn white message-btn" data-seller="Urban Canvas Studio">Message</button>
          </div>

          <div class="card" style="flex:1;justify-content:space-between">
            <div style="display:flex;gap:12px;align-items:center">
              <div class="avatar"><img src="../images/artist2.jpg" alt="artist"></div>
              <div>
                <div style="font-weight:700">Creative Expressions Gallery</div>
                <div style="font-size:13px;color:#6a7a8a">Narayanganj ‚Ä¢ 5km away</div>
              </div>
            </div>
            <button class="btn white message-btn" data-seller="Creative Expressions Gallery">Message</button>
          </div>
        </div>
      </section>

      <!-- Our creations (expanded examples) -->
      <section class="section" aria-labelledby="our-creations">
        <h3 id="our-creations">Featured Artworks</h3>
        <div class="creationsGrid" style="margin-top:12px">
          <div class="product">
            <img src="../images/painting8.jpg" alt="Abstract Composition">
            <div class="txt">Abstract Composition</div>
            <div style="font-weight:700;color:var(--accent)">$450</div>
            <button class="contact-seller" data-product="Abstract Composition" data-seller="Elena Rodriguez">Contact the artist!</button>
          </div>

          <div class="product">
            <img src="../images/painting7.jpg" alt="Cityscape">
            <div class="txt">Urban Style</div>
            <div style="font-weight:700;color:var(--accent)">$320</div>
            <button class="contact-seller" data-product="Urban Cityscape" data-seller="Marcus Johnson">Contact the artist!</button>
          </div>

          <div class="product">
            <img src="../images/painting9.jpg" alt="Portrait">
            <div class="txt">Mountain Abstract</div>
            <div style="font-weight:700;color:var(--accent)">$580</div>
            <button class="contact-seller" data-product="Portrait of a Woman" data-seller="Isabella Rossi">Contact the artist!</button>
          </div>

          <div class="product">
            <img src="../images/painting10.jpg" alt="Calligraphy">
            <div class="txt">Landscape</div>
            <div style="font-weight:700;color:var(--accent)">$220</div>
            <button class="contact-seller" data-product="Arabic Calligraphy Art" data-seller="Ahmed Hassan">Contact the artist!</button>
          </div>

          <div class="product">
            <img src="../images/painting11.jpg" alt="Landscape">
            <div class="txt">Arabic Calligraphy</div>
            <div style="font-weight:700;color:var(--accent)">$360</div>
            <button class="contact-seller" data-product="Mountain Landscape" data-seller="David Chen">Contact the artist!</button>
          </div>

          <div class="product">
            <img src="../images/painting12.jpg" alt="Watercolor">
            <div class="txt">Floral</div>
            <div style="font-weight:700;color:var(--accent)">$180</div>
            <button class="contact-seller" data-product="Floral Watercolor" data-seller="Sophia Williams">Contact the artist!</button>
          </div>
        </div>
        <!-- callout -->
        <div style="margin-top:12px;display:flex;gap:12px;align-items:center">
          <div style="flex:1;min-width:220px;background:linear-gradient(180deg,#f0f5ff,#e8f0fe);padding:16px;border-radius:12px;display:flex;flex-direction:column;justify-content:center;gap:8px">
            <strong>Your review of 'Elena Rodriguez' the artist right now!</strong>
            <small style="color:#6a7a8a">Leave a quick star rating to help other collectors</small>
            <div style="margin-top:8px"><button class="btn white" style="padding:8px 12px">Write a review</button></div>
          </div>
        </div>
      </section>

      <!-- Activity Feed (restored + styled) -->
      <div class="activity-card card">
        <h4>Activity Feed</h4>
        <div class="activity-grid" style="margin-top:10px">
          <div class="activity">üÜï New collection by David Chen available!</div>
          <div class="activity">‚ù§Ô∏è Wishlist item "Abstract Composition" on sale!</div>
          <div class="activity">üèÖ You earned art collector badge for purchases!</div>
          <div class="activity">‚úçÔ∏è Your review of "Art Workshop" was approved!</div>
        </div>
      </div>

    </main>
  </div>

  <!-- Chat Modal (used by message and contact buttons) -->
  <div class="chat-modal" id="chatModal" role="dialog" aria-modal="true" aria-labelledby="chatTitle">
    <div class="chat-box" role="document">
      <button class="chat-close" id="chatCloseBtn" aria-label="Close chat">‚úï</button>
      <h4 id="chatTitle">Message Artist</h4>
      <div class="meta" id="chatMeta">To: <strong id="chatSeller">‚Äî</strong> ¬∑ Artwork: <span id="chatProduct">‚Äî</span></div>
      <textarea id="chatMessage" placeholder="Write a short message..." style="width:100%;height:110px;padding:10px;border-radius:8px;border:1px solid #ddd;resize:vertical"></textarea>
      <div style="display:flex;gap:8px;margin-top:10px;justify-content:flex-end">
        <button class="btn white" id="chatCancel">Cancel</button>
        <button class="btn dark" id="chatSend">Send Message</button>
      </div>
      <div id="chatStatus" style="margin-top:10px;font-size:13px;color:green;display:none">Message sent ‚úî</div>
    </div>
  </div>

  <script>
    /* ===== HERO SLIDER (touch + mouse drag + arrows + dots + pause) ===== */
    (function(){
      const hero = document.querySelector('.hero');
      const slides = Array.from(document.querySelectorAll('.hero-slider .slide'));
      const prevBtn = document.querySelector('.hero-arrow.prev');
      const nextBtn = document.querySelector('.hero-arrow.next');
      const controls = document.querySelector('.hero-controls');
      let current = 0;
      let autoplayInterval = 4000;
      let timer = null;
      let isDragging = false;
      let startX = 0;
      let moved = 0;

      // create dots
      slides.forEach((_, i) => {
        const dot = document.createElement('div');
        dot.className = 'dot' + (i === 0 ? ' active' : '');
        dot.dataset.index = i;
        dot.title = 'Go to slide ' + (i+1);
        controls.appendChild(dot);
      });
      const dots = Array.from(controls.querySelectorAll('.dot'));

      function showSlide(index) {
        index = (index + slides.length) % slides.length;
        slides.forEach((s,i) => s.classList.toggle('active', i === index));
        dots.forEach((d,i) => d.classList.toggle('active', i === index));
        current = index;
      }

      function next() { showSlide(current + 1); }
      function prev() { showSlide(current - 1); }

      // autoplay
      function startAutoplay() {
        stopAutoplay();
        timer = setInterval(next, autoplayInterval);
      }
      function stopAutoplay() {
        if (timer) { clearInterval(timer); timer = null; }
      }
      startAutoplay();

      // arrows
      nextBtn.addEventListener('click', () => { next(); resetAutoplay(); });
      prevBtn.addEventListener('click', () => { prev(); resetAutoplay(); });

      // dots click
      dots.forEach(dot => {
        dot.addEventListener('click', (e) => {
          showSlide(Number(dot.dataset.index));
          resetAutoplay();
        });
      });

      // pause on hover/focus
      hero.addEventListener('mouseenter', stopAutoplay);
      hero.addEventListener('mouseleave', startAutoplay);
      hero.addEventListener('focusin', stopAutoplay);
      hero.addEventListener('focusout', startAutoplay);

      function resetAutoplay() { stopAutoplay(); setTimeout(startAutoplay, 2000); }

      // touch support
      hero.addEventListener('touchstart', e => {
        startX = e.touches[0].clientX;
        moved = 0;
      }, {passive:true});
      hero.addEventListener('touchmove', e => {
        const dx = e.touches[0].clientX - startX;
        moved = dx;
      }, {passive:true});
      hero.addEventListener('touchend', e => {
        if (Math.abs(moved) > 50) {
          if (moved > 0) prev(); else next();
          resetAutoplay();
        }
      });

      // mouse drag for desktop
      hero.addEventListener('mousedown', (e) => {
        isDragging = true;
        startX = e.clientX;
        hero.classList.add('dragging');
      });
      window.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        moved = e.clientX - startX;
      });
      window.addEventListener('mouseup', (e) => {
        if (!isDragging) return;
        isDragging = false;
        hero.classList.remove('dragging');
        if (Math.abs(moved) > 60) {
          if (moved > 0) prev(); else next();
          resetAutoplay();
        }
        moved = 0;
      });

      // keyboard arrows
      window.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') { prev(); resetAutoplay(); }
        if (e.key === 'ArrowRight') { next(); resetAutoplay(); }
        if (e.key === 'Escape') closeChat();
      });

      // pre-load images (non-blocking)
      slides.forEach(s => {
        const url = (s.style.backgroundImage || '').replace(/^url\(["']?/, '').replace(/["']?\)$/, '');
        if (url) {
          const img = new Image(); img.src = url;
        }
      });
    })();

    /* ===== Chat modal logic (used by both 'Message' and 'Contact the artist!') ===== */
    (function(){
      const chatModal = document.getElementById('chatModal');
      const chatSeller = document.getElementById('chatSeller');
      const chatProduct = document.getElementById('chatProduct');
      const chatMessage = document.getElementById('chatMessage');
      const chatStatus = document.getElementById('chatStatus');
      const chatCloseBtn = document.getElementById('chatCloseBtn');
      const chatSend = document.getElementById('chatSend');
      const chatCancel = document.getElementById('chatCancel');

      // open chat helper
      function openChat({ seller = '‚Äî', product = '‚Äî' } = {}) {
        chatSeller.textContent = seller;
        chatProduct.textContent = product;
        chatMessage.value = `Hi ${seller}, I'm interested in your artwork "${product}". Can I know more about it?`;
        chatStatus.style.display = 'none';
        chatModal.classList.add('active');
        chatMessage.focus();
      }

      // close
      function closeChat() {
        chatModal.classList.remove('active');
      }

      // wire message buttons (nearby artists)
      document.querySelectorAll('.message-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const seller = btn.dataset.seller || btn.textContent.trim() || 'Seller';
          openChat({ seller, product: 'General Inquiry' });
        });
      });

      // wire product contact buttons
      document.querySelectorAll('.contact-seller').forEach(btn => {
        btn.addEventListener('click', () => {
          const seller = btn.dataset.seller || 'Seller';
          const product = btn.dataset.product || 'Product';
          openChat({ seller, product });
        });
      });

      // support header contact support button
      document.getElementById('contactSupportBtn').addEventListener('click', () => {
        openChat({ seller: 'Nibash Support', product: 'Support' });
      });

      // modal actions
      chatCloseBtn.addEventListener('click', closeChat);
      chatCancel.addEventListener('click', closeChat);

      chatSend.addEventListener('click', () => {
        // simulate sending
        chatStatus.textContent = 'Message sent ‚úî';
        chatStatus.style.display = 'block';
        // small delay then close
        setTimeout(() => {
          closeChat();
        }, 900);
      });

      // close when clicking outside content
      chatModal.addEventListener('click', (e) => {
        if (e.target === chatModal) closeChat();
      });

      // make closeChat available globally for keyboard ESC used earlier
      window.closeChat = closeChat;
    })();
  </script>
</body>
</html>
