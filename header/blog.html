<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Nibash</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/blog.css">
</head>

<body>
    <header>
        <div class="logo">
            <img src="../images/mainLogo.png" alt="Nibash Logo">
            <span class="logo-text">Nibash</span>
        </div>
        <button class="logout-btn" onclick="location.href='../index.html'">Log Out</button>
    </header>

    <div class="content">
        <h2>Blog</h2>
        <form id="blogForm">
            <div class="form-group">
                <input type="text" id="author" placeholder="Author Name" required>
            </div>
            <div class="form-group">
                <input type="text" id="title" placeholder="Blog Title" required>
            </div>
            <div class="form-group">
                <textarea id="contentText" placeholder="Blog Content" rows="4" required></textarea>
            </div>
            <div class="form-group">
                <input type="text" id="imageUrl" placeholder="Image URL (optional)">
            </div>
            <button type="submit" class="add-btn">Add Post</button>
        </form>

        <div class="blog-container" id="blogContainer">
            <p id="noPosts">No blog posts yet.</p>
        </div>
    </div>

    <script>
        const blogForm = document.getElementById("blogForm");
        const blogContainer = document.getElementById("blogContainer");
        const noPosts = document.getElementById("noPosts");
        const defaultImage = "../images/mainLogo.png";

        // Load posts from localStorage
        let posts = JSON.parse(localStorage.getItem("posts")) || [];

        function savePosts() {
            localStorage.setItem("posts", JSON.stringify(posts));
        }

        function renderPosts() {
            blogContainer.innerHTML = "";
            if (posts.length === 0) {
                blogContainer.appendChild(noPosts);
                noPosts.style.display = "block";
                return;
            }
            noPosts.style.display = "none";
            posts.forEach((post, index) => {
                const card = document.createElement("div");
                card.className = "blog-card";
                card.innerHTML = `
          <img src="${post.image}" alt="Blog Image">
          <h3>${post.title}</h3>
          <p><strong>By:</strong> ${post.author}</p>
          <p>${post.content}</p>
          <button class="delete-btn">Delete</button>
        `;
                card.querySelector(".delete-btn").addEventListener("click", () => {
                    posts.splice(index, 1);
                    savePosts();
                    renderPosts();
                });
                blogContainer.appendChild(card);
            });
        }

        // Handle form submission
        blogForm.addEventListener("submit", function (e) {
            e.preventDefault();

            const author = document.getElementById("author").value;
            const title = document.getElementById("title").value;
            const content = document.getElementById("contentText").value;
            const imageUrl = document.getElementById("imageUrl").value || defaultImage;

            posts.push({ author, title, content, image: imageUrl });
            savePosts();
            renderPosts();
            blogForm.reset();
        });

        // Initial render
        renderPosts();
    </script>
</body>

</html>